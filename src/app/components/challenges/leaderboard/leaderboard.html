<!-- leaderboard.html -->
<div class="table-responsive">
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Posici贸n</th>
        <th>Usuario</th>
        <th>Puntaje</th>
        <th *ngIf="isChallengeEnded">C贸digo</th>
      </tr>
    </thead>
    <tbody>
      @for (participation of participations | sortByScore; track participation.id; let i = $index) {
      <tr>
        <td>{{ i + 1 }}</td>
        <td>
          <a
            class="user-link"
            (click)="viewProfile(participation.user?.uid || '')"
            style="cursor: pointer; text-decoration: underline; color: #007bff;"
          >
            {{ participation.user?.username || 'An贸nimo' }}
          </a>
        </td>
        <td>
          @if (showScores || isChallengeEnded || authService.isAdmin()) {
            {{ participation.score || '-' }}
          } @else {
            <span class="text-muted">OCULTO</span>
          }
        </td>
        <td *ngIf="isChallengeEnded">
          @if (participation.code) {
          <button 
            class="btn btn-sm btn-outline-primary" 
            (click)="viewCode(participation.id)"
          >
            Ver C贸digo
          </button>
          } @else {
          <span class="text-muted">No disponible</span>
          }
        </td>
      </tr>
      }
    </tbody>
  </table>
</div>