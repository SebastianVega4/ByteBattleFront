<div class="payment-instructions">
  <h4>Instrucciones para participar</h4>
  <ol>
    <li>
      Realiza una transferencia de <strong>${{ challenge.participationCost | number }} COP</strong>
      al número de Nequi: <strong>{{ nequiNumber }}</strong>
    </li>
    <li>
      En la descripción de la transferencia, incluye:
      <ul>
        <li>Tu nombre de usuario: <strong>{{ authService.getCurrentUser()?.username }}</strong></li>
        <li>El nombre del reto: <strong>{{ challenge.title }}</strong></li>
      </ul>
    </li>
    <li>
      Una vez realizado el pago, haz clic en el botón de abajo para notificarnos:
    </li>
  </ol>

  <div *ngIf="!paymentRequested; else confirmationMessage">
    <button mat-raised-button color="primary" 
            (click)="confirmPayment()"
            [disabled]="isSubmitting">
      <mat-icon>payment</mat-icon>
      <span *ngIf="!isSubmitting">Ya realicé el pago</span>
      <span *ngIf="isSubmitting">Enviando solicitud...</span>
    </button>
  </div>

  <ng-template #confirmationMessage>
    <div class="alert alert-success mt-3">
      <mat-icon>check_circle</mat-icon>
      <strong>¡Solicitud enviada!</strong> Un administrador verificará tu pago y te notificará cuando sea confirmado.
    </div>
  </ng-template>

  <div class="alert alert-warning mt-3">
    <mat-icon>info</mat-icon>
    <strong>Importante:</strong> Tu participación será verificada manualmente por un administrador.
    Recibirás una notificación cuando sea confirmada.
  </div>
</div>